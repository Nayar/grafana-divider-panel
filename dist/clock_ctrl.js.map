{"version":3,"sources":["../src/clock_ctrl.js"],"names":["PanelCtrl","moment","_","panelDefaults","mode","clockType","offsetFromUtc","offsetFromUtcMinutes","bgColor","countdownSettings","endCountdownTime","seconds","milliseconds","add","toDate","endText","dateSettings","showDate","dateFormat","fontSize","fontWeight","timeSettings","customFormat","ClockCtrl","$scope","$injector","defaultsDeep","panel","Date","events","on","onInitEditMode","bind","render","addEditorTab","scope","elem","$panelContainer","find","css","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,e,kBAAAA,S;;AACDC,Y;;AACAC,O;;;;;;;;;;;;;;;;;;;;;AAGDC,mB,GAAgB;AACpBC,cAAM,MADc;AAEpBC,mBAAW,SAFS;AAGpBC,uBAAe,IAHK;AAIpBC,8BAAsB,IAJF;AAKpBC,iBAAS,IALW;AAMpBC,2BAAmB;AACjBC,4BAAkBT,SAASU,OAAT,CAAiB,CAAjB,EAAoBC,YAApB,CAAiC,CAAjC,EAAoCC,GAApC,CAAwC,CAAxC,EAA2C,KAA3C,EAAkDC,MAAlD,EADD;AAEjBC,mBAAS;AAFQ,SANC;AAUpBC,sBAAc;AACZC,oBAAU,KADE;AAEZC,sBAAY,YAFA;AAGZC,oBAAU,MAHE;AAIZC,sBAAY;AAJA,SAVM;AAgBpBC,sBAAc;AACZC,wBAAc,UADF;AAEZH,oBAAU,MAFE;AAGZC,sBAAY;AAHA;AAhBM,O;;2BAuBTG,S;;;AACX,2BAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,4HACvBD,MADuB,EACfC,SADe;;AAE7BvB,YAAEwB,YAAF,CAAe,MAAKC,KAApB,EAA2BxB,aAA3B;;AAEA,cAAI,EAAE,MAAKwB,KAAL,CAAWlB,iBAAX,CAA6BC,gBAA7B,YAAyDkB,IAA3D,CAAJ,EAAsE;AACpE,kBAAKD,KAAL,CAAWlB,iBAAX,CAA6BC,gBAA7B,GAAgDT,OAAO,MAAK0B,KAAL,CAAWlB,iBAAX,CAA6BC,gBAApC,EAAsDI,MAAtD,EAAhD;AACD;;AAED,gBAAKe,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,mBAAf,EAAoC,MAAKG,MAAL,CAAYD,IAAZ,OAApC;AAT6B;AAU9B;;;;2CAEgB;AACf,iBAAKE,YAAL,CAAkB,SAAlB,EAA6B,gDAA7B,EAA+E,CAA/E;AACD;;;+BAEIC,K,EAAOC,I,EAAM;AAAA;;AAChB,iBAAKP,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7B,kBAAMO,kBAAkBD,KAAKE,IAAL,CAAU,kBAAV,CAAxB;;AAEA,kBAAI,OAAKX,KAAL,CAAWnB,OAAf,EAAwB;AACtB6B,gCAAgBE,GAAhB,CAAoB,kBAApB,EAAwC,OAAKZ,KAAL,CAAWnB,OAAnD;AACD,eAFD,MAEO;AACL6B,gCAAgBE,GAAhB,CAAoB,kBAApB,EAAwC,EAAxC;AACD;AACF,aARD;AASD;;;;QA3B4BvC,S;;;;AA8B/BuB,gBAAUiB,WAAV,GAAwB,aAAxB","file":"clock_ctrl.js","sourcesContent":["import {PanelCtrl} from 'app/plugins/sdk';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport './css/clock-panel.css!';\n\nconst panelDefaults = {\n  mode: 'time',\n  clockType: '24 hour',\n  offsetFromUtc: null,\n  offsetFromUtcMinutes: null,\n  bgColor: null,\n  countdownSettings: {\n    endCountdownTime: moment().seconds(0).milliseconds(0).add(1, 'day').toDate(),\n    endText: '00:00:00'\n  },\n  dateSettings: {\n    showDate: false,\n    dateFormat: 'YYYY-MM-DD',\n    fontSize: '20px',\n    fontWeight: 'normal'\n  },\n  timeSettings: {\n    customFormat: 'HH:mm:ss',\n    fontSize: '60px',\n    fontWeight: 'normal'\n  }\n};\n\nexport class ClockCtrl extends PanelCtrl {\n  constructor($scope, $injector) {\n    super($scope, $injector);\n    _.defaultsDeep(this.panel, panelDefaults);\n\n    if (!(this.panel.countdownSettings.endCountdownTime instanceof Date)) {\n      this.panel.countdownSettings.endCountdownTime = moment(this.panel.countdownSettings.endCountdownTime).toDate();\n    }\n\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('panel-initialized', this.render.bind(this));\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Options', 'public/plugins/nayar-divider-panel/editor.html', 2);\n  }\n\n  link(scope, elem) {\n    this.events.on('render', () => {\n      const $panelContainer = elem.find('.panel-container');\n\n      if (this.panel.bgColor) {\n        $panelContainer.css('background-color', this.panel.bgColor);\n      } else {\n        $panelContainer.css('background-color', '');\n      }\n    });\n  }\n}\n\nClockCtrl.templateUrl = 'module.html';\n"]}